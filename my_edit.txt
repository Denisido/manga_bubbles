Идея соединения хвостика с пузырем без поиска пересечений


Пузыри не масштабируются — размеры (width, height) и центральная позиция (x, y) берутся строго из point.json.
Хвостик строится треугольником:
Основание хвостика (base) определяется как точка на границе пузыря, которая ближе всего к направлению к anchorX/anchorY.
Вычисляется угол между центром пузыря и anchor.
От этого угла строятся три точки:
Основание (base) на границе пузыря.
Левая и правая грани треугольника (с небольшим смещением по углу).
Кончик хвостика (tip), направленный к anchor.
Соединение с пузырем:
Вместо вычисления точного пересечения линий хвостика и контура пузыря, добавляются соединительные линии от левой и правой грани хвостика к точке основания на границе пузыря.
В дальнейшем эти соединительные линии можно будет заменить плавными кривыми (для более органичного вида).
Преимущества подхода:
Избегаем сложных вычислений пересечений.
Сохраняем фиксированный размер пузыря.
Хвостик всегда аккуратно примыкает к пузырю.
Позволяет в будущем легко добавить плавные переходы вместо прямых линий.

